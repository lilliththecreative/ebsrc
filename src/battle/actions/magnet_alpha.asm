
BTLACT_MAGNET_A:
	BEGIN_C_FUNCTION_FAR
	STACK_RESERVE_VARS
	STACK_RESERVE_INT32
	STACK_RESERVE_INT32
	STACK_RESERVE_INT16
	END_STACK_VARS
	LDX CURRENT_TARGET
	LDA a:battler::pp_target,X
	BNE @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR MSG_BTL_PPSUCK_ZERO
	BRA @UNKNOWN3
@UNKNOWN0:
	LDA #4
	JSR RAND_LIMIT
	TAX
	STX @LOCAL02
	LDA #4
	JSR RAND_LIMIT
	STA @VIRTUAL02
	LDX @LOCAL02
	TXA
	CLC
	ADC @VIRTUAL02
	STA @VIRTUAL02
	INC @VIRTUAL02
	INC @VIRTUAL02
	LDX CURRENT_TARGET
	LDA a:battler::pp_target,X
	CMP @VIRTUAL02
	BCS @UNKNOWN1
	STA @VIRTUAL02
@UNKNOWN1:
	LOADPTR MSG_BTL_PPSUCK, @LOCAL00
	MOVE_INT1632S @VIRTUAL02, @VIRTUAL06
	MOVE_INT @VIRTUAL06, @LOCAL01
	JSL DISPLAY_TEXT_WAIT
	LDX @VIRTUAL02
	LDA CURRENT_TARGET
	JSR REDUCE_PP
	LDX CURRENT_ATTACKER
	LDA @VIRTUAL02
	CLC
	ADC a:battler::pp_target,X
	TAX
	LDA CURRENT_ATTACKER
	JSR SET_PP
@UNKNOWN3:
	END_C_FUNCTION
