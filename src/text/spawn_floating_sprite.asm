;X: ID?
SPAWN_FLOATING_SPRITE: ;$C4B3D0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE 22
	TXY
	STA $02
	CMP #$FFFF
	BEQL @UNKNOWN6
	LDA $02
	ASL
	TAX
	LDA ENTITY_SCRIPT_TABLE,X
	CMP #$FFFF
	BEQL @UNKNOWN6
	LDA ENTITY_SIZES,X
	STA $14
	LOADPTR FLOATING_SPRITE_TABLE, $06
	TYA
	OPTIMIZED_MULT $04, 5
	CLC
	ADC $06
	STA $06
	LDA ENTITY_ABS_X_TABLE,X
	STA ACTIVE_MANPU_X
	LDA ENTITY_ABS_Y_TABLE,X
<<<<<<< HEAD
	STA ACTIVE_MANPU_Y
	LDA @LOCAL03
=======
	STA UNKNOWN_7EB3FA
	LDA $14
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0002
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	JSR UNKNOWN_C4B329
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0003
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	AND #$0080
	BEQ @UNKNOWN2
	LDX #$FF00
	BRA @UNKNOWN3
@UNKNOWN2:
	LDX #$0000
@UNKNOWN3:
	STX $04
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0003
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	ORA $04
	CLC
	ADC ACTIVE_MANPU_X
	STA ACTIVE_MANPU_X
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0004
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	AND #$0080
	BEQ @UNKNOWN4
	LDX #$FF00
	BRA @UNKNOWN5
@UNKNOWN4:
	LDX #$0000
@UNKNOWN5:
	STX $04
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0004
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	ORA $04
	CLC
<<<<<<< HEAD
	ADC ACTIVE_MANPU_Y
	STA @LOCAL02
	STA ACTIVE_MANPU_Y
	LDA ACTIVE_MANPU_X
	STA @LOCAL00
	LDA @LOCAL02
	STA @LOCAL01
	LDY #.LOWORD(-1)
=======
	ADC UNKNOWN_7EB3FA
	STA $12
	STA UNKNOWN_7EB3FA
	LDA UNKNOWN_7EB3F8
	STA $0E
	LDA $12
	STA $10
	LDY #$FFFF
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	LDX #EVENT_SCRIPT::EVENT_785
	LDA [$06]
	JSL CREATE_ENTITY
	ASL
	TAX
	STX $12
	LDA $02
	ORA #$C000
	STA ENTITY_DRAW_PRIORITY,X
	LDA $02
	ASL
	TAX
	LDA ENTITY_SURFACE_FLAGS,X
	LDX $12
	STA ENTITY_SURFACE_FLAGS,X
@UNKNOWN6:
	PLD
	RTL
