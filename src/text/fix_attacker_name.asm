
FIX_ATTACKER_NAME:
	BEGIN_C_FUNCTION_FAR
	STACK_RESERVE_VARS
	STACK_RESERVE_INT32
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_PARAM_INT16 ;int
	END_STACK_VARS
	TAY
	STY @LOCAL03
	SEP #PROC_FLAGS::ACCUM8
.IF .DEFINED(USA)
	STZ PRINT_ATTACKER_ARTICLE
.ENDIF
	STZ_BADOPT @LOCAL00
	LDX #.SIZEOF(enemy_data::name) + .SIZEOF(char_struct::name) - 2
	REP #PROC_FLAGS::ACCUM8
	LDA #.LOWORD(ATTACKER_NAME_ADJUST_SCRATCH)
	JSL MEMSET16
	LDX CURRENT_ATTACKER
	LDA a:battler::ally_or_enemy,X
	AND #$00FF
	CMP #1
	BEQ @UNKNOWN0
	LDX CURRENT_ATTACKER
	LDA a:battler::npc_id,X
	AND #$00FF
	BEQL @UNKNOWN4
@UNKNOWN0:
	LOADPTR ENEMY_CONFIGURATION_TABLE, @VIRTUAL06
	LDX CURRENT_ATTACKER
	LDA __BSS_START__,X
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
.IF .DEFINED(USA)
	INC
.ENDIF
	CLC
	ADC @VIRTUAL06
	STA @VIRTUAL06
	STA @LOCAL00
	LDA @VIRTUAL06+2
	STA @LOCAL00+2
	LDX #.SIZEOF(enemy_data::name)
	LDA #.LOWORD(ATTACKER_NAME_ADJUST_SCRATCH)
	JSR COPY_ENEMY_NAME
	TAX
	STX @LOCAL02
	LDX CURRENT_ATTACKER
	LDA a:battler::ally_or_enemy,X
	AND #$00FF
	CMP #1
	BNE @UNKNOWN2
	LDY @LOCAL03
	BNE @UNKNOWN_M2
	LDX CURRENT_ATTACKER
	LDA a:battler::the_flag,X
	AND #$00FF
	CMP #1
	BNE @UNKNOWN1
	LDX CURRENT_ATTACKER
	LDA __BSS_START__+76,X
	JSL UNKNOWN_C2B66A
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP #2
	BEQ @UNKNOWN_M2
@UNKNOWN1:
.IF .DEFINED(JPN)
	LDX CURRENT_ATTACKER
	SEP #PROC_FLAGS::ACCUM8
	LDA a:battler::the_flag,X
	CLC
	ADC #CHAR::A_ - 1
	LDX @LOCAL02
	STA __BSS_START__,X
@UNKNOWN_M2:
	LDY @LOCAL03
	BEQ @UNKNOWN2
	REP #PROC_FLAGS::ACCUM8
	LDA $A18C
	CMP #1
	BLTEQ @UNKNOWN2
	SEP #PROC_FLAGS::ACCUM8
	LDA #102
	LDX @LOCAL02
	STA __BSS_START__,X
	INX
	LDA #118
	STA __BSS_START__,X
.ELSE
	SEP #PROC_FLAGS::ACCUM8
	LDA #CHAR::SPACE
	LDX @LOCAL02
	STA __BSS_START__,X
	INX
	STX @LOCAL03
	LDA #1
	STA PRINT_ATTACKER_ARTICLE
	LDX CURRENT_ATTACKER
	LDA a:battler::the_flag,X
	CLC
	ADC #CHAR::A_ - 1
	LDX @LOCAL03
	STA __BSS_START__,X
@UNKNOWN_M2:
.ENDIF
@UNKNOWN2:
	LDX CURRENT_ATTACKER
	REP #PROC_FLAGS::ACCUM8
	LDA __BSS_START__,X
	CMP #ENEMY::MY_PET
	BNE @UNKNOWN3
	PROMOTENEARPTR GAME_STATE + game_state::pet_name, @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	MOVE_INT @VIRTUAL06, @LOCAL00
	LDX #6
	LDA #.LOWORD(ATTACKER_NAME_ADJUST_SCRATCH)
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	STZ ATTACKER_NAME_ADJUST_SCRATCH+6
@UNKNOWN3:
.IF .DEFINED(JPN)
	LDX #.SIZEOF(enemy_data::name) + .SIZEOF(char_struct::name) - 2
.ELSE
	LDX #.SIZEOF(enemy_data::name) + .SIZEOF(char_struct::name) - 3
.ENDIF
	REP #PROC_FLAGS::ACCUM8
	LDA #.LOWORD(ATTACKER_NAME_ADJUST_SCRATCH)
	JSL REDIRECT_C1AC4A
.IF .DEFINED(USA)
	LDX CURRENT_ATTACKER
	LDA __BSS_START__,X
	STA ATTACKER_ENEMY_ID
.ENDIF
	BRA @UNKNOWN6
@UNKNOWN4:
	LDX CURRENT_ATTACKER
	LDA __BSS_START__,X
	CMP #4
	BGT @UNKNOWN6
	LDX #.SIZEOF(char_struct::name)
	STX @LOCAL01
	LDX CURRENT_ATTACKER
	LDA a:battler::row,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(PARTY_CHARACTERS)
	LDX @LOCAL01
	JSL REDIRECT_C1AC4A
@UNKNOWN6:
	END_C_FUNCTION
