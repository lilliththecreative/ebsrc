
FILL_HP_PP_TILE_BUFFER: ;$C20DC5
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE 24
	STX $02
	TAX
	CPY #$3000
	BCS @UNKNOWN0
	LDA #$0000
	STA $16
	BRA @UNKNOWN1
@UNKNOWN0:
	TYA
	SEC
	SBC #$3000
	STA $16
@UNKNOWN1:
	MOVE_INT_CONSTANT $3400, $0A
	MOVE_INT1632 $16, $06
	JSL DIVISION32
	LDA $06
	TAY
	LDA $02
	OPTIMIZED_MULT $04, 12
	STA $02
	TXA
	OPTIMIZED_MULT $04, 24
	CLC
	ADC $02
	CLC
	ADC #.LOWORD(HPPP_WINDOW_BUFFER) + .SIZEOF(hp_pp_window_buffer::hp1) - (1 * 2)
	TAX
	LDA HPPP_WINDOW_DIGIT_BUFFER + 2
	AND #$00FF
	STA $14
	LDA HPPP_WINDOW_DIGIT_BUFFER + 1
	AND #$00FF
	STA $04
	LDA HPPP_WINDOW_DIGIT_BUFFER
	AND #$00FF
	STA $12
	LDA $14
	LSR
	LSR
	ASL
	ASL
	ASL
	ASL
	STA $02
	LDA $14
	ASL
	ASL
	CLC
	ADC $02
	STY $02
	CLC
	ADC $02
	CLC
	ADC #$2600
	STA $02
	STA __BSS_START__ + hp_pp_window_buffer::hp1,X
	LDA $02
	CLC
	ADC #$0010
	STA __BSS_START__ + hp_pp_window_buffer::hp2,X
	TXA
	DEC
	DEC
	STA $02
	STA $10
	LDA $04
	BNE @UNKNOWN2
	LDA $12
	BNE @UNKNOWN2
	LDX #$0248
	BRA @UNKNOWN3
@UNKNOWN2:
	LDX #$0200
@UNKNOWN3:
	LDA $14
	CMP #$0009
	BNE @UNKNOWN4
	CPY #$0000
	BNE @UNKNOWN5
@UNKNOWN4:
	LDY #$0000
@UNKNOWN5:
	LDA $04
	LSR
	LSR
	ASL
	ASL
	ASL
	ASL
	STA $02
	LDA $04
	ASL
	ASL
	CLC
	ADC $02
	STY $02
	CLC
	ADC $02
	STX $02
	CLC
	ADC $02
	CLC
	ADC #$2400
	LDX $10
	STX $02
	STA __BSS_START__,X
	CLC
	ADC #$0010
	LDX $02
	STA __BSS_START__ + hp_pp_window_buffer::hp2,X
	LDA $02
	DEC
	DEC
	STA $0E
	LDA $12
	BNE @UNKNOWN6
	LDX #$0248
	BRA @UNKNOWN7
@UNKNOWN6:
	LDX #$0200
@UNKNOWN7:
	LDA $04
	CMP #$0009
	BNE @UNKNOWN8
	CPY #$0000
	BNE @UNKNOWN9
@UNKNOWN8:
	LDY #$0000
@UNKNOWN9:
	STY $04
	LDA $12
	LSR
	LSR
	ASL
	ASL
	ASL
	ASL
	STA $02
	LDA $12
	ASL
	ASL
	CLC
	ADC $02
	CLC
	ADC $04
	STX $02
	CLC
	ADC $02
	CLC
	ADC #$2400
	TAX
	STX $12
	PHX
	LDA $0E
	TAX
	PLA
	STA __BSS_START__ + hp_pp_window_buffer::hp1,X
	LDA $0E
	PHA
	LDX $12
	TXA
	CLC
	ADC #$0010
	PLX
	STA __BSS_START__ + hp_pp_window_buffer::hp2,X
	PLD
	RTS
