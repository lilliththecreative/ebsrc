
GET_PARTY_CHARACTER_NAME:
	BEGIN_C_FUNCTION_FAR
	STACK_RESERVE_VARS
	STACK_RESERVE_INT16
	STACK_RESERVE_PARAM_INT16 ;int id
	STACK_RESERVE_RETURN_INT32 ;const char*
	END_STACK_VARS
	STA @LOCAL00
	CMP #PARTY_MEMBER::POO
	BLTEQ @UNKNOWN1
	CMP #PARTY_MEMBER::KING
	BNE @UNKNOWN0
	PROMOTENEARPTR GAME_STATE+game_state::pet_name, @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	MOVE_INT @VIRTUAL06, @RETURNVAL
	BRA @RETURN
@UNKNOWN0:
	LOADPTR ENEMY_CONFIGURATION_TABLE, @VIRTUAL06
	LDA @LOCAL00
	ASL
	TAX
	INX
	LDA f:NPC_AI_TABLE,X
	AND #$00FF
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
.IF !.DEFINED(JPN)
	INC
.ENDIF
	CLC
	ADC @VIRTUAL06
	STA @VIRTUAL06
	STA @RETURNVAL
	LDA @VIRTUAL06+2
	STA @RETURNVAL+2
	BRA @RETURN
@UNKNOWN1:
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(PARTY_CHARACTERS)
	PROMOTENEARPTRA @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	MOVE_INT @VIRTUAL06, @RETURNVAL
@RETURN:
	END_C_FUNCTION
