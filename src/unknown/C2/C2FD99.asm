
UNKNOWN_C2FD99:
	BEGIN_C_FUNCTION_FAR
	STACK_RESERVE_VARS
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	END_STACK_VARS
	LDA #0
	STA @VIRTUAL04
	STA @LOCAL05
	JMP @UNKNOWN15
@UNKNOWN0:
	LDA @VIRTUAL04
	ASL
	CLC
	ADC #.LOWORD(BATTLE_SPRITE_PALETTE_EFFECT_FRAMES_LEFT)
	TAX
	LDA __BSS_START__,X
	BEQL @UNKNOWN14
	DEC
	STA __BSS_START__,X
	LDA @VIRTUAL04
	OPTIMIZED_MULT @VIRTUAL04, 96
	STA @LOCAL04
	CLC
	ADC #.LOWORD(BATTLE_SPRITE_PALETTE_EFFECT_DELTAS) + 6
	TAY
	LDA @LOCAL04
	CLC
	ADC #.LOWORD(BATTLE_SPRITE_PALETTE_EFFECT_COUNTERS) + 6
	TAX
	STX @LOCAL03
	LDA @LOCAL04
	CLC
	ADC #.LOWORD(BATTLE_SPRITE_PALETTE_EFFECT_STEPS) + 6
	STA @LOCAL02
	LDA @LOCAL05
	STA @VIRTUAL04
	OPTIMIZED_MULT @VIRTUAL04, BPP4PALETTE_SIZE
	CLC
	ADC #.LOWORD(PALETTES) + BPP4PALETTE_SIZE * 12 + 1 * COLOUR_SIZE
	STA @VIRTUAL02
	LDA #1
	STA @LOCAL01
	JMP @UNKNOWN12
@UNKNOWN2:
	LDA __BSS_START__,Y
	BEQ @UNKNOWN5
	STX @LOCAL04
	LDA @LOCAL02
	TAX
	LDA __BSS_START__,X
	CLC
	ADC (@LOCAL04)
	STA (@LOCAL04)
	BRA @UNKNOWN4
@UNKNOWN3:
	STX @LOCAL04
	LDA @LOCAL00
	SEC
	SBC BATTLE_SPRITE_PALETTE_EFFECT_SPEED
	STA (@LOCAL04)
	LDA @VIRTUAL02
	STA @LOCAL04
	LDA __BSS_START__,Y
	CLC
	ADC (@LOCAL04)
	STA (@LOCAL04)
@UNKNOWN4:
	LDX @LOCAL03
	LDA __BSS_START__,X
	STA @LOCAL00
	LDA BATTLE_SPRITE_PALETTE_EFFECT_SPEED
	CMP @LOCAL00
	BLTEQ @UNKNOWN3
@UNKNOWN5:
	INY
	INY
	INX
	INX
	STX @LOCAL04
	LDA @LOCAL02
	INC
	INC
	STA @LOCAL03
	LDA __BSS_START__,Y
	BEQ @UNKNOWN8
	STX @LOCAL02
	LDA @LOCAL03
	TAX
	LDA __BSS_START__,X
	CLC
	ADC (@LOCAL02)
	STA (@LOCAL02)
	BRA @UNKNOWN7
@UNKNOWN6:
	STX @LOCAL02
	LDA @LOCAL00
	SEC
	SBC BATTLE_SPRITE_PALETTE_EFFECT_SPEED
	STA (@LOCAL02)
	LDA @VIRTUAL02
	STA @LOCAL02
	LDA __BSS_START__,Y
	CLC
	ADC (@LOCAL02)
	STA (@LOCAL02)
@UNKNOWN7:
	LDX @LOCAL04
	LDA __BSS_START__,X
	STA @LOCAL00
	LDA BATTLE_SPRITE_PALETTE_EFFECT_SPEED
	CMP @LOCAL00
	BLTEQ @UNKNOWN6
@UNKNOWN8:
	INY
	INY
	INX
	INX
	STX @LOCAL04
	LDA @LOCAL03
	INC
	INC
	STA @LOCAL02
	LDA __BSS_START__,Y
	BEQ @UNKNOWN11
	STX @LOCAL03
	LDA @LOCAL02
	TAX
	LDA __BSS_START__,X
	CLC
	ADC (@LOCAL03)
	STA (@LOCAL03)
	BRA @UNKNOWN10
@UNKNOWN9:
	STX @LOCAL03
	LDA @LOCAL00
	SEC
	SBC BATTLE_SPRITE_PALETTE_EFFECT_SPEED
	STA (@LOCAL03)
	LDA @VIRTUAL02
	STA @LOCAL03
	LDA __BSS_START__,Y
	CLC
	ADC (@LOCAL03)
	STA (@LOCAL03)
@UNKNOWN10:
	LDX @LOCAL04
	LDA __BSS_START__,X
	STA @LOCAL00
	LDA BATTLE_SPRITE_PALETTE_EFFECT_SPEED
	CMP @LOCAL00
	BLTEQ @UNKNOWN9
@UNKNOWN11:
	INY
	INY
	INX
	INX
	STX @LOCAL03
	LDA @LOCAL02
	INC
	INC
	STA @LOCAL02
	INC @VIRTUAL02
	INC @VIRTUAL02
	INC @LOCAL01
@UNKNOWN12:
	LDA @LOCAL01
	CMP #16
	BCCL @UNKNOWN2
	LDA #16
	JSL UNKNOWN_C0856B
@UNKNOWN14:
	INC @VIRTUAL04
	LDA @VIRTUAL04
	STA @LOCAL05
@UNKNOWN15:
	LDA @VIRTUAL04
	CMP #4
	BCCL @UNKNOWN0
	END_C_FUNCTION
