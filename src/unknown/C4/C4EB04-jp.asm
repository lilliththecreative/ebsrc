
UNKNOWN_C4EB04:
	BEGIN_C_FUNCTION_FAR
	STACK_RESERVE_VARS
	STACK_RESERVE_INT32
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_PARAM_INT16
	END_STACK_VARS
	STY @VIRTUAL04
	STX @VIRTUAL02
	STA @LOCAL03
	LDA BG3_Y_POS
	LSR
	LSR
	LSR
	CLC
	ADC @VIRTUAL02
	AND #$001F
	STA @LOCAL02
	LDX @VIRTUAL04
	LDA @LOCAL03
	JSL UNKNOWN_C4E369_
	LDA @VIRTUAL04
	AND #$0001
	BEQ @UNKNOWN0_
	INC @VIRTUAL04
@UNKNOWN0_:
	LDA @VIRTUAL04
	INC
	LSR
	STA @VIRTUAL02
	LDA @LOCAL02
	ASL
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC @LOCAL03
	CLC
	ADC #VRAM::CAST_TILEMAP
	SEC
	SBC @VIRTUAL02
	STA @VIRTUAL02
	LOADPTR BUFFER + $4000, @VIRTUAL06
	LDA @LOCAL03
	ASL
	CLC
	ADC @VIRTUAL06
	STA @VIRTUAL06
	STA @LOCAL00
	LDA @VIRTUAL06+2
	STA @LOCAL00+2
	LDY @VIRTUAL02
	LDA @VIRTUAL04
	ASL
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA #0
	JSL PREPARE_VRAM_COPY
	.A16
	LDA @LOCAL02
	CMP #31
	BEQ @UNKNOWN0
	LDA @VIRTUAL02
	CLC
	ADC #32
	STA @LOCAL01
	BRA @UNKNOWN1
@UNKNOWN0:
	LDA @VIRTUAL02
	SEC
	SBC #$03E0
	STA @LOCAL01
@UNKNOWN1:
	LOADPTR BUFFER + $4000, @VIRTUAL06
	LDA @LOCAL03
	ASL
	CLC
	ADC #64
	CLC
	ADC @VIRTUAL06
	STA @VIRTUAL06
	STA @LOCAL00
	LDA @VIRTUAL06+2
	STA @LOCAL00+2
	LDA @LOCAL01
	TAY
	LDA @VIRTUAL04
	ASL
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA #0
	JSL PREPARE_VRAM_COPY
	END_C_FUNCTION
