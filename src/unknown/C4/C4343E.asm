
UNKNOWN_C4343E: ;$C4343E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE 20
	TAX
	DEC
	STA $02
	LOADINT32 3600, $0A
	LOADPTRPTR TIMER, $06
	JSL DIVISION32
	LOADINT32 60000, $0A
	CLC
	LDA $0A
	SBC $06
	LDA $0C
	SBC $08
	BRANCHLTEQS @UNKNOWN2
	LDA $06
	STA $12
	BRA @UNKNOWN3
@UNKNOWN2:
	LDA #59999
	STA $12
@UNKNOWN3:
	LDA $02
	ASL
	ASL
	ASL
	TAX
	LDA $12
	STA GAME_STATE + game_state::saved_photo_states,X
	LDY #$0000
	STY $10
	JMP @UNKNOWN10
@UNKNOWN4:
	REP #PROC_FLAGS::ACCUM8
	TYA
	CLC
	ADC #.LOWORD(GAME_STATE)
	STA $12
	CLC
	ADC #game_state::unknown96
	TAX
	STX $0E
	LDA __BSS_START__,X
	AND #$00FF
	BNE @UNKNOWN5
	STY $04
	LDA $02
	ASL
	ASL
	ASL
	CLC
	ADC $04
	TAX
	SEP #PROC_FLAGS::ACCUM8
	STZ GAME_STATE + game_state::saved_photo_states + photo_state::party,X
	BRA @UNKNOWN9
@UNKNOWN5:
	.A16
	LDA $12
	TAX
	LDA __BSS_START__+game_state::player_controlled_party_members,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
<<<<<<< HEAD
	ADC #.LOWORD(PARTY_CHARACTERS)
	STA @LOCAL02
	STA CURRENT_PARTY_MEMBER_TICK
	LDX @LOCAL00
=======
	ADC #.LOWORD(CHAR_STRUCT)
	STA $12
	STA UNKNOWN_7E4DC6
	LDX $0E
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	LDA __BSS_START__,X
	AND #$00FF
	TAX
	STX $0E
	LDA $12
	TAX
	LDA a:char_struct::afflictions,X
	AND #$00FF
	CMP #STATUS_0::UNCONSCIOUS
	BNE @UNKNOWN6
	LDX $0E
	TXA
	ORA #$0020
	TAX
	STX $0E
	BRA @UNKNOWN7
@UNKNOWN6:
	CMP #STATUS_0::DIAMONDIZED
	BNE @UNKNOWN7
	LDX $0E
	TXA
	ORA #$0040
	TAX
	STX $0E
@UNKNOWN7:
	LDX CURRENT_PARTY_MEMBER_TICK
	LDA a:char_struct::afflictions+STATUS_GROUP::PERSISTENT_HARDHEAL,X
	AND #$00FF
	CMP #STATUS_1::MUSHROOMIZED
	BNE @UNKNOWN8
	LDX $0E
	TXA
	ORA #$0080
	TAX
	STX $0E
@UNKNOWN8:
	LDY $10
	STY $04
	LDA $02
	ASL
	ASL
	ASL
	CLC
	ADC $04
	PHA
	LDX $0E
	TXA
	SEP #PROC_FLAGS::ACCUM8
	PLX
	STA GAME_STATE + game_state::saved_photo_states + photo_state::party,X
@UNKNOWN9:
	INY
	STY $10
@UNKNOWN10:
	CPY #$0006
	BCCL @UNKNOWN4
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL
