
<<<<<<< HEAD
UNKNOWN_EFE175:
	BEGIN_C_FUNCTION
	STACK_RESERVE_VARS
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	END_STACK_VARS
	LOADPTR BUFFER, @VIRTUAL06
	LDA #0
	STA [@VIRTUAL06]
=======
UNKNOWN_EFE175: ;$EFE175
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE_CLOBBER 30
	LOADPTR UNKNOWN_7F0000, $06
	LDA #$0000
	STA [$06]
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	LDA DEBUG_START_POSITION_X
	STA $04
	LDA DEBUG_START_POSITION_Y
	STA $02
	JSL UNKNOWN_C08726
	JSL UNKNOWN_C0927C
	JSL UNKNOWN_C01A86
	LDX #$0000
	LDA #$8000
	JSL ALLOC_SPRITE_MEM
	JSL INITIALIZE_MISC_OBJECT_DATA
<<<<<<< HEAD
	LDA DEBUG_VIEW_CHARACTER_SPRITE
	STA @LOCAL07
	LDA #23
=======
	LDA DEBUG_UNKNOWN_B565
	STA $1C
	LDA #$0017
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	STA ENTITY_ALLOCATION_MIN_SLOT
	LDA #$0018
	STA ENTITY_ALLOCATION_MAX_SLOT
	LDA #$0003
	STA NEW_ENTITY_PRIORITY
	LDA $04
	STA GAME_STATE+game_state::leader_x_coord
	LDA $02
	STA GAME_STATE+game_state::leader_y_coord
	LDY #$0000
	TYX
	LDA #EVENT_SCRIPT::EVENT_001
	JSL INIT_ENTITY
	JSL UNKNOWN_C02D29
	LDA #$0000
	STA $1A
	BRA @UNKNOWN1
@UNKNOWN0:
	CLC
	ADC #.LOWORD(GAME_STATE)
	TAX
	SEP #PROC_FLAGS::ACCUM8
	STZ a:game_state::party_members,X
	REP #PROC_FLAGS::ACCUM8
	LDA $1A
	INC
	STA $1A
@UNKNOWN1:
	CMP #$0006
	BCC @UNKNOWN0
	LDA #CHARACTER_PAULA
	JSL ADD_CHAR_TO_PARTY
	LDA DEBUG_MODE_NUMBER
	CMP #$0005
	BEQ @UNKNOWN2
	LDA DEBUG_MODE_NUMBER
	CMP #$0003
	BEQ @UNKNOWN2
	LDA #CHARACTER_JEFF
	JSL ADD_CHAR_TO_PARTY
	LDA #CHARACTER_POO
	JSL ADD_CHAR_TO_PARTY
@UNKNOWN2:
	LDA #$00FF
	JSL UNKNOWN_C46631
	LDX #$0080
	STX ENTITY_SCREEN_X_TABLE + (PARTY_LEADER_ENTITY_INDEX * 2)
	LDX #$0070
	STX ENTITY_SCREEN_Y_TABLE + (PARTY_LEADER_ENTITY_INDEX * 2)
	LDA DEBUG_MODE_NUMBER
	CMP #$0002
	BNE @UNKNOWN3
	LDA #$0020
	STA $0E
	STA $10
	LDY #$FFFF
	LDX #EVENT_SCRIPT::EVENT_004
	LDA $1C
	JSL CREATE_ENTITY
	STA $18
	ASL
	STA $1A
	CLC
	ADC #.LOWORD(ENTITY_TICK_CALLBACK_HIGH)
	TAX
	LDA __BSS_START__,X
	ORA #OBJECT_TICK_DISABLED | OBJECT_MOVE_DISABLED
	STA __BSS_START__,X
	LDA $1A
	CLC
	ADC #.LOWORD(ENTITY_SPRITEMAP_POINTER_HIGH)
	TAX
	LDA __BSS_START__,X
	ORA #$8000
	STA __BSS_START__,X
@UNKNOWN3:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00
	STA $0E
	LDX #$0200
	REP #PROC_FLAGS::ACCUM8
<<<<<<< HEAD
	LDA #.LOWORD(PALETTES)
=======
	LDA #$0200
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	JSL MEMSET16
	JSL OVERWORLD_INITIALIZE
	LDX $02
	LDA $04
	JSL LOAD_MAP_AT_POSITION
	LDY #$0004
	LDX $02
	LDA $04
	JSL UNKNOWN_C03FA9
	JSL UNKNOWN_EFD95E
	LDA DEBUG_MODE_NUMBER
	CMP #$0003
	BNE @UNKNOWN4
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0013
	STA TM_MIRROR
	LDA #$0004
	STA TD_MIRROR
	LDA #$0002
	STA f:CGWSEL
	LDA #$0047
	STA f:CGADSUB
	REP #PROC_FLAGS::ACCUM8
	LDA #$0003
	STA DEBUG_MODE_NUMBER
@UNKNOWN4:
	LDA DEBUG_MODE_NUMBER
	CMP #$0005
	BNE @UNKNOWN5
	JSL UNKNOWN_EFEAC8
@UNKNOWN5:
	LDA #.LOWORD(PROCESS_OVERWORLD_TASKS)
	JSL SET_IRQ_CALLBACK
	JSL UNKNOWN_C08744
	LDX #$0001
	TXA
	JSL FADE_IN
@UNKNOWN6:
	JSL OAM_CLEAR
	LDA DEBUG_MODE_NUMBER
	CMP #$0002
	BEQ @UNKNOWN7
	CMP #$0005
	BEQ @UNKNOWN8
	BRA @UNKNOWN9
@UNKNOWN7:
	JSR DISPLAY_VIEW_CHARACTER_DEBUG_OVERLAY
	BRA @UNKNOWN9
@UNKNOWN8:
	JSR DISPLAY_CHECK_POSITION_DEBUG_OVERLAY
@UNKNOWN9:
	LDA PAD_PRESS
	AND #PAD::A_BUTTON
	BEQL @UNKNOWN13
	STZ BATTLE_SWIRL_COUNTDOWN
	LDA PAD_STATE
	AND #PAD::X_BUTTON
	BEQ @UNKNOWN11
<<<<<<< HEAD
	LDA #.LOWORD(-1)
	STA DEBUG_ENEMIES_ENABLED_FLAG
@UNKNOWN11:
	LDA #.LOWORD(-1)
	STA LOADED_MAP_PALETTE
	STA LOADED_MAP_TILE_COMBO
	LDA SCREEN_X_PIXELS
=======
	LDA #$FFFF
	STA UNKNOWN_7EB575
@UNKNOWN11:
	LDA #$FFFF
	STA UNKNOWN_7E4370
	STA UNKNOWN_7E436E
	LDA UNKNOWN_7E4380
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	AND #$FFF8
	STA SCREEN_X_PIXELS
	LDA SCREEN_Y_PIXELS
	AND #$FFF8
	STA SCREEN_Y_PIXELS
	JSL UNKNOWN_C08726
	LDA #.LOWORD(GAME_STATE)+game_state::leader_x_coord
	STA $04
	LDA #.LOWORD(GAME_STATE)+game_state::leader_y_coord
	STA $02
	LDX $02
	LDA __BSS_START__,X
	TAX
	STX $16
	LDX $04
	LDA __BSS_START__,X
	LDX $16
	JSL LOAD_MAP_AT_POSITION
	LDY GAME_STATE+game_state::leader_direction
	LDX $02
	LDA __BSS_START__,X
	TAX
	STX $16
	LDX $04
	LDA __BSS_START__,X
	LDX $16
	JSL UNKNOWN_C03FA9
	JSL UNKNOWN_EFD95E
	STZ DEBUG_ENEMIES_ENABLED_FLAG
	LDA DEBUG_MODE_NUMBER
	CMP #$0005
	BNE @UNKNOWN12
	JSL UNKNOWN_EFEAC8
@UNKNOWN12:
	JSL UNKNOWN_C08744
	LDY #$0000
	LDX #$0001
	LDA #$0004
	JSL FADE_IN_WITH_MOSAIC
@UNKNOWN13:
	LDA DEBUG_MODE_NUMBER
	CMP #$0002
	BNEL @UNKNOWN26
	LDY $1C
	LDA PAD_HELD + 2
	STA $14
	AND #PAD::UP
	BEQ @UNKNOWN16
	LDA $1C
	CMP #$014D
	BEQ @UNKNOWN15
	INC $1C
	BRA @UNKNOWN18
@UNKNOWN15:
	STZ $1C
	BRA @UNKNOWN18
@UNKNOWN16:
	LDA $14
	AND #PAD::DOWN
	BEQ @UNKNOWN18
	LDA $1C
	BEQ @UNKNOWN17
	DEC $1C
	BRA @UNKNOWN18
@UNKNOWN17:
	LDA #$0144
	STA $1C
@UNKNOWN18:
	LDA PAD_PRESS + 2
	AND #PAD::X_BUTTON
	BEQ @UNKNOWN19
	LDA $18
	ASL
	STA $1A
	CLC
	ADC #.LOWORD(ENTITY_TICK_CALLBACK_HIGH)
	TAX
	LDA __BSS_START__,X
	ORA #OBJECT_TICK_DISABLED | OBJECT_MOVE_DISABLED
	STA __BSS_START__,X
	LDA $1A
	CLC
	ADC #.LOWORD(ENTITY_SPRITEMAP_POINTER_HIGH)
	TAX
	LDA __BSS_START__,X
	ORA #$8000
	STA __BSS_START__,X
@UNKNOWN19:
	LDA PAD_PRESS + 2
	AND #PAD::Y_BUTTON
	BEQ @UNKNOWN20
	LDA $18
	ASL
	STA $1A
	CLC
	ADC #.LOWORD(ENTITY_TICK_CALLBACK_HIGH)
	TAX
	LDA __BSS_START__,X
	AND #$FFFF ^ (OBJECT_TICK_DISABLED | OBJECT_MOVE_DISABLED)
	STA __BSS_START__,X
	LDA $1A
	CLC
	ADC #.LOWORD(ENTITY_SPRITEMAP_POINTER_HIGH)
	TAX
	LDA __BSS_START__,X
	AND #$7FFF
	STA __BSS_START__,X
@UNKNOWN20:
	CPY $1C
	BEQ @UNKNOWN21
	LDA $18
	JSL UNKNOWN_C02140
	LDA #$0020
	STA $0E
	STA $10
	LDY $18
	LDX #EVENT_SCRIPT::EVENT_004
	LDA $1C
	JSL CREATE_ENTITY
	ASL
	TAX
	STZ ENTITY_NPC_IDS,X
@UNKNOWN21:
	LDA PAD_PRESS + 2
	AND #PAD::A_BUTTON
	BEQ @UNKNOWN22
	LDA $18
	ASL
	TAX
	LDA ENTITY_TICK_CALLBACK_HIGH,X
	AND #OBJECT_TICK_DISABLED
	BNE @UNKNOWN22
	LDA BG1_X_POS
	CLC
	ADC #$0020
	TAX
	LDA BG1_Y_POS
	CLC
	ADC #$0020
	STX $0E
	STA $10
	LDY #$FFFF
	LDX #EVENT_SCRIPT::EVENT_006
	LDA $1C
	JSL CREATE_ENTITY
	ASL
	TAX
	STZ ENTITY_NPC_IDS,X
@UNKNOWN22:
	LDA PAD_PRESS + 2
	AND #PAD::B_BUTTON
	BEQ @UNKNOWN26
	LDA BG1_X_POS
	STA $12
	LDY BG1_Y_POS
	LDA #$0000
	STA $02
	BRA @UNKNOWN25
@UNKNOWN23:
	LDA $02
	ASL
	TAX
	LDA ENTITY_SCRIPT_TABLE,X
	CMP #$FFFF
	BEQ @UNKNOWN24
	STZ ENTITY_PATHFINDING_STATES,X
@UNKNOWN24:
	INC $02
@UNKNOWN25:
	LDA $02
	CMP #$001E
	BNE @UNKNOWN23
	LDA $12
	STA $0E
	STY $10
	LDY #$FFFF
	LDX #EVENT_SCRIPT::EVENT_499
	LDA #$008A
	JSL CREATE_ENTITY
	ASL
	TAX
<<<<<<< HEAD
	LDA #.LOWORD(-1)
	STA ENTITY_PATHFINDING_STATES,X
=======
	LDA #$FFFF
	STA UNKNOWN_30X2_TABLE_41,X
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	JSL UNKNOWN_C0BD96
@UNKNOWN26:
	JSL RUN_ACTIONSCRIPT_FRAME
	LDA PAD_STATE
	AND #PAD::START_BUTTON | PAD::SELECT_BUTTON
	CMP #PAD::START_BUTTON | PAD::SELECT_BUTTON
	BNE @UNKNOWN27
	LDA ENTITY_ABS_X_TABLE + (PARTY_LEADER_ENTITY_INDEX * 2)
	STA DEBUG_START_POSITION_X
	LDA ENTITY_ABS_Y_TABLE + (PARTY_LEADER_ENTITY_INDEX * 2)
	STA DEBUG_START_POSITION_Y
<<<<<<< HEAD
	LDA @LOCAL07
	STA DEBUG_VIEW_CHARACTER_SPRITE
=======
	LDA $1C
	STA DEBUG_UNKNOWN_B565
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	BRA @UNKNOWN33
@UNKNOWN27:
	LDA PAD_PRESS
	AND #PAD::Y_BUTTON
	BEQ @UNKNOWN28
	JSL DEBUG_Y_BUTTON_MENU
@UNKNOWN28:
	LDA DEBUG_MODE_NUMBER
	CMP #$0003
	BNE @UNKNOWN30
	LDA BG1_X_POS
	STA BG3_X_POS
	LDA BG1_Y_POS
	STA BG3_Y_POS
	LDA PAD_PRESS
	AND #PAD::SELECT_BUTTON
	BEQ @UNKNOWN30
	LDX VIEW_ATTRIBUTE_MODE
	INX
<<<<<<< HEAD
	STX VIEW_ATTRIBUTE_MODE
	CPX #4
=======
	STX UNKNOWN_7EB55F
	CPX #$0004
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	BNE @UNKNOWN29
	STZ VIEW_ATTRIBUTE_MODE
@UNKNOWN29:
	LDX GAME_STATE+game_state::leader_y_coord
	LDA GAME_STATE+game_state::leader_x_coord
	JSR UNKNOWN_EFE133
@UNKNOWN30:
	LDA DEBUG_MODE_NUMBER
	CMP #$0001
	BNE @UNKNOWN31
	LDA PAD_PRESS
	AND #PAD::B_BUTTON
	BEQ @UNKNOWN31
	JSL OPEN_MENU_BUTTON
@UNKNOWN31:
	LDA CURRENT_QUEUED_INTERACTION
	SEC
	SBC NEXT_QUEUED_INTERACTION
	BEQ @UNKNOWN32
	JSL PROCESS_QUEUED_INTERACTIONS
@UNKNOWN32:
	JSL UPDATE_SCREEN
	JSL WAIT_UNTIL_NEXT_FRAME
	JSL INIT_BATTLE_OVERWORLD
	JMP @UNKNOWN6
@UNKNOWN33:
	PLD
	RTS
