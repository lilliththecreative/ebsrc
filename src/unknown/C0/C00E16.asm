
UNKNOWN_C00E16:
	BEGIN_C_FUNCTION
	STACK_RESERVE_VARS
	STACK_RESERVE_INT32
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_PARAM_INT16
	END_STACK_VARS
	STX @VIRTUAL04
	TAY
	STY @LOCAL08
	LDA DEBUG
	BEQ @UNKNOWN0
	LDX @VIRTUAL04
	TYA
	JSL UNKNOWN_EFDFC4
@UNKNOWN0:
	LDA #256
	JSL SBRK
	STA @LOCAL07
	CLC
	ADC #128
	STA @LOCAL06
	LDY @LOCAL08
	TYA
	DEC
	STA @LOCAL08
	LDA @VIRTUAL04
	LSR
	LSR
	AND #$000F
	OPTIMIZED_MULT @VIRTUAL04, 32
	CLC
	ADC #.LOWORD(LOADED_MAP_BLOCKS)
	STA @LOCAL05
	LDA @LOCAL08
	AND #$0003
	PHA
	LDA @VIRTUAL04
	AND #$0003
	OPTIMIZED_MULT @VIRTUAL04, 4
	STA @VIRTUAL02
	LDA @LOCAL08
	LSR
	LSR
	AND #$000F
	ASL
	TAY
	LDA (@LOCAL05),Y
	OPTIMIZED_MULT @VIRTUAL04, 16
	CLC
	ADC @VIRTUAL02
	PLY
	STY @VIRTUAL02
	CLC
	ADC @VIRTUAL02
	TAY
	STY @LOCAL04
	LDA @LOCAL08
	AND #$003F
	TAX
	STX @LOCAL03
	LDA #0
	STA @VIRTUAL02
	STA @LOCAL02
	BRA @UNKNOWN5
@UNKNOWN1:
	LDA @LOCAL08
	AND #$0003
	BNE @UNKNOWN2
	LDA @VIRTUAL04
	AND #$0003
	OPTIMIZED_MULT @VIRTUAL04, 4
	STA @VIRTUAL02
	LDA @LOCAL08
	LSR
	LSR
	AND #$000F
	ASL
	TAY
	LDA (@LOCAL05),Y
	OPTIMIZED_MULT @VIRTUAL04, 16
	CLC
	ADC @VIRTUAL02
	TAY
	STY @LOCAL04
@UNKNOWN2:
	LDY @LOCAL04
	TYA
	ASL
	TAX
	LDA BUFFER + $8000,X
	STA @LOCAL01
	LDX @LOCAL03
	TXA
	ASL
	TAY
	LDA @LOCAL01
	STA (@LOCAL07),Y
	LDY @LOCAL04
	INY
	STY @LOCAL04
	LDA @LOCAL01
	AND #$03FF
	CMP #384
	BCS @UNKNOWN3
	LDA @LOCAL01
	ORA #$2000
	STA @LOCAL01
	BRA @UNKNOWN4
@UNKNOWN3:
	STZ @LOCAL01
@UNKNOWN4:
	TXA
	ASL
	TAY
	LDA @LOCAL01
	STA (@LOCAL06),Y
	INX
	TXA
	AND #$003F
	TAX
	STX @LOCAL03
	LDA @LOCAL08
	INC
	STA @LOCAL08
	LDA @LOCAL02
	STA @VIRTUAL02
	INC @VIRTUAL02
	LDA @VIRTUAL02
	STA @LOCAL02
@UNKNOWN5:
	LDA @VIRTUAL02
	CMP #MAP_RESOLUTION_WIDTH
	BCCL @UNKNOWN1
	LDA @VIRTUAL04
	AND #$001F
	OPTIMIZED_MULT @VIRTUAL04, 32
	STA @VIRTUAL02
	LDA @LOCAL07
	PROMOTENEARPTRA @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	COPY_TO_VRAM1OFFSET @VIRTUAL06, @VIRTUAL02, 64, VRAM::OVERWORLD_LAYER_1_TILEMAP, 0
	LDA @LOCAL07
	CLC
	ADC #$0040
	PROMOTENEARPTRA @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	COPY_TO_VRAM1OFFSET @VIRTUAL06, @VIRTUAL02, $40, VRAM::OVERWORLD_LAYER_1_TILEMAP + TILEMAP_SIZE, 0
	LDA PHOTOGRAPH_MAP_LOADING_MODE
	BNE @UNKNOWN7
	LDA @LOCAL06
	PROMOTENEARPTRA @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	COPY_TO_VRAM1OFFSET @VIRTUAL06, @VIRTUAL02, $40, VRAM::OVERWORLD_LAYER_2_TILEMAP, 0
	LDA @LOCAL06
	CLC
	ADC #$0040
	PROMOTENEARPTRA @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	COPY_TO_VRAM1OFFSET @VIRTUAL06, @VIRTUAL02, $40, VRAM::OVERWORLD_LAYER_2_TILEMAP + TILEMAP_SIZE, 0
@UNKNOWN7:
	END_C_FUNCTION
