
UNKNOWN_C08B19:
	SEP #PROC_FLAGS::ACCUM8
	LDA #0
	STA UNREAD_7E0009
	REP #PROC_FLAGS::ACCUM8
	JSL OAM_CLEAR
;void UpdateScreen()
UPDATE_SCREEN:
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8
	JSR UNKNOWN_C08B8E
	SEP #PROC_FLAGS::ACCUM8
	PHB
	PLA
	CMP #$00FF
	BNE @UNKNOWN1
@UNKNOWN0:
	BRA @UNKNOWN0
@UNKNOWN1:
	LDA OAM_HIGH_TABLE_BUFFER
	CMP #$0080
	BEQ @UNKNOWN3
@UNKNOWN2:
	LSR
	LSR
	BCC @UNKNOWN2
@UNKNOWN3:
	LDX OAM_HIGH_TABLE_ADDR
	STA a:__BSS_START__,X
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8
	LDA NEXT_FRAME_BUF_ID
	DEC
	ASL
	TAX
	LDA BG1_X_POS
	STA BG1_X_POS_BUF,X
	LDA BG1_Y_POS
	STA BG1_Y_POS_BUF,X
	LDA BG2_X_POS
	STA BG2_X_POS_BUF,X
	LDA BG2_Y_POS
	STA BG2_Y_POS_BUF,X
	LDA BG3_X_POS
	STA BG3_X_POS_BUF,X
	LDA BG3_Y_POS
	STA BG3_Y_POS_BUF,X
	LDA BG4_X_POS
	STA BG4_X_POS_BUF,X
	LDA BG4_Y_POS
	STA BG4_Y_POS_BUF,X
	SEP #PROC_FLAGS::ACCUM8
	LDA NEXT_FRAME_BUF_ID
	STA NEXT_FRAME_DISPLAY_ID
	EOR #$0003
	STA NEXT_FRAME_BUF_ID
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8
	RTL
