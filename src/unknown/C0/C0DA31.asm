
UNKNOWN_C0DA31:
	BEGIN_C_FUNCTION
	STACK_RESERVE_VARS
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	END_STACK_VARS
	LDA FIRST_ENTITY
	INC
	BEQL @UNKNOWN11
	LDA #0
	STA @VIRTUAL02
	TAY
	STY @LOCAL03
	BRA @UNKNOWN4
@UNKNOWN1:
	TYA
	ASL
	TAX
	LDA ENTITY_SCRIPT_TABLE,X
	INC
	BEQ @UNKNOWN3
	LDA ENTITY_DRAW_PRIORITY,X
	DEC
	BNE @UNKNOWN2
	LDA ENTITY_SCREEN_Y_TABLE,X
	CLC
	ADC #8
	AND #$FE00
	BNE @UNKNOWN2
	LDA @VIRTUAL02
	ASL
	TAX
	TYA
	INC
	STA ENTITY_DRAW_SORTING,X
	INC @VIRTUAL02
	BRA @UNKNOWN3
@UNKNOWN2:
	TYA
	JSR UNKNOWN_C0A0CA
@UNKNOWN3:
	LDY @LOCAL03
	INY
	STY @LOCAL03
@UNKNOWN4:
	CPY #MAX_ENTITIES
	BNE @UNKNOWN1
	LDA @VIRTUAL02
	ASL
	TAX
	LDA #.LOWORD(-1)
	STA ENTITY_DRAW_SORTING,X
	LDA @VIRTUAL02
	STA @VIRTUAL04
	BRA @UNKNOWN10
@UNKNOWN5:
	LDX #0
	STX @LOCAL03
	BRA @UNKNOWN7
@UNKNOWN6:
	LDX @LOCAL03
	INX
	STX @LOCAL03
@UNKNOWN7:
	TXA
	ASL
	TAX
	LDA ENTITY_DRAW_SORTING,X
	BEQ @UNKNOWN6
	LDX @LOCAL03
	STX @VIRTUAL02
	STX @LOCAL02
	DEC
	ASL
	TAX
	LDY ENTITY_ABS_Y_TABLE,X
	BRA @UNKNOWN9
@UNKNOWN8:
	LDA @LOCAL01
	BEQ @UNKNOWN9
	DEC
	ASL
	TAX
	LDA ENTITY_ABS_Y_TABLE,X
	STA @LOCAL00
	STA @VIRTUAL02
	TYA
	CMP @VIRTUAL02
	BCS @UNKNOWN9
	LDA @LOCAL00
	TAY
	LDX @LOCAL03
	STX @VIRTUAL02
	LDA @VIRTUAL02
	STA @LOCAL02
@UNKNOWN9:
	LDX @LOCAL03
	INX
	STX @LOCAL03
	TXA
	ASL
	TAX
	LDA ENTITY_DRAW_SORTING,X
	STA @LOCAL01
	INC
	BNE @UNKNOWN8
	LDA @LOCAL02
	STA @VIRTUAL02
	ASL
	CLC
	ADC #.LOWORD(ENTITY_DRAW_SORTING)
	TAX
	STX @LOCAL01
	LDA __BSS_START__,X
	DEC
	JSR UNKNOWN_C0A0CA
	LDA #0
	LDX @LOCAL01
	STA __BSS_START__,X
@UNKNOWN10:
	LDA @VIRTUAL04
	STA @LOCAL00
	LDA @VIRTUAL04
	DEC
	STA @VIRTUAL04
	LDA @LOCAL00
	BNEL @UNKNOWN5
@UNKNOWN11:
	END_C_FUNCTION
