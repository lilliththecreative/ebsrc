
UNKNOWN_C0780F:
	BEGIN_C_FUNCTION_FAR
	STACK_RESERVE_VARS
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_RETURN_INT16
	END_STACK_VARS
	STY @VIRTUAL04
	STX @LOCAL02
	STA @LOCAL01
	LDY #0
	LDA MOVING_PARTY_MEMBER_ENTITY_ID
	STA @VIRTUAL02
	LDA @LOCAL01
	BNE @UNKNOWN0
	LDA DISABLED_TRANSITIONS
	BNE @UNKNOWN0
	LDA PAJAMA_FLAG
	BEQ @UNKNOWN0
	LDA #OVERWORLD_SPRITE::NESS_IN_PJS
	JMP @UNKNOWN28
@UNKNOWN0:
	LDA @VIRTUAL02
	CMP #.LOWORD(-1)
	BEQ @UNKNOWN1
	LDA @VIRTUAL02
	ASL
	TAX
	STZ ENTITY_OVERLAY_FLAGS,X
@UNKNOWN1:
	LDA GAME_STATE + game_state::party_status
	AND #$00FF
	CMP #1
	BNE @UNKNOWN3
	LDA GAME_STATE + game_state::unknown92
	CMP #3
	BEQ @UNKNOWN2
	LDA #13
	JMP @UNKNOWN28
@UNKNOWN2:
	LDA #37
	JMP @UNKNOWN28
@UNKNOWN3:
	LDX @VIRTUAL04
	LDA a:char_struct::afflictions + STATUS_GROUP::PERSISTENT_EASYHEAL,X
	AND #$00FF
	CMP #STATUS_0::UNCONSCIOUS
	BEQ @UNKNOWN4
	CMP #STATUS_0::DIAMONDIZED
	BEQ @UNKNOWN5
	CMP #STATUS_0::NAUSEOUS
	BEQ @UNKNOWN7
	BRA @UNKNOWN8
@UNKNOWN4:
	LDY #1
	BRA @UNKNOWN8
@UNKNOWN5:
	LDA GAME_STATE + game_state::unknown92
	CMP #3
	BEQ @UNKNOWN6
	LDA #12
	JMP @UNKNOWN28
@UNKNOWN6:
	LDA #36
	JMP @UNKNOWN28
@UNKNOWN7:
	LDA @VIRTUAL02
	CMP #.LOWORD(-1)
	BEQ @UNKNOWN8
	LDA @VIRTUAL02
	ASL
	CLC
	ADC #.LOWORD(ENTITY_OVERLAY_FLAGS)
	TAX
	LDA __BSS_START__,X
	ORA #$8000
	STA __BSS_START__,X
@UNKNOWN8:
	LDX @VIRTUAL04
	LDA a:char_struct::afflictions + STATUS_GROUP::PERSISTENT_HARDHEAL,X
	AND #$00FF
	CMP #STATUS_1::MUSHROOMIZED
	BEQ @UNKNOWN9
	CMP #STATUS_1::POSSESSED
	BEQ @UNKNOWN10
	BRA @UNKNOWN11
@UNKNOWN9:
	LDA @VIRTUAL02
	CMP #.LOWORD(-1)
	BEQ @UNKNOWN11
	LDA @VIRTUAL02
	ASL
	CLC
	ADC #.LOWORD(ENTITY_OVERLAY_FLAGS)
	TAX
	LDA __BSS_START__,X
	ORA #$4000
	STA __BSS_START__,X
	BRA @UNKNOWN11
@UNKNOWN10:
	INC POSSESSED_PLAYER_COUNT
@UNKNOWN11:
	LDA GAME_STATE + game_state::unknown92
	CMP #6
	BEQ @UNKNOWN12
	CMP #4
	BEQ @UNKNOWN13
	BRA @UNKNOWN14
@UNKNOWN12:
	LDA #7
	JMP @UNKNOWN28
@UNKNOWN13:
	LDX @VIRTUAL04
	LDA a:char_struct::unknown53,X
	BNE @UNKNOWN14
	LDA #6
	JMP @UNKNOWN28
@UNKNOWN14:
	CPY #0
	BNE @UNKNOWN19
	LDA @LOCAL02
	BEQ @UNKNOWN15
	CMP #12
	BEQ @UNKNOWN15
	CMP #13
	BEQ @UNKNOWN15
	CMP #4
	BEQ @UNKNOWN16
	CMP #7
	BEQ @UNKNOWN17
	CMP #8
	BEQ @UNKNOWN18
	BRA @UNKNOWN19
@UNKNOWN15:
	LDY #0
	BRA @UNKNOWN19
@UNKNOWN16:
	LDY #1
	BRA @UNKNOWN19
@UNKNOWN17:
	LDY #2
	BRA @UNKNOWN19
@UNKNOWN18:
	LDY #3
@UNKNOWN19:
	LDX GAME_STATE + game_state::unknown92
	CPX #3
	BNE @UNKNOWN20
	INY
	INY
	INY
	INY
	LDA @VIRTUAL02
	ASL
	TAX
	STZ ENTITY_OVERLAY_FLAGS,X
	BRA @UNKNOWN21
@UNKNOWN20:
	CPX #5
	BNE @UNKNOWN21
	CPY #0
	BNE @UNKNOWN21
	TYA
	CLC
	ADC #6
	TAY
@UNKNOWN21:
	LDA GAME_STATE + game_state::party_status
	AND #$00FF
	CMP #3
	BNE @UNKNOWN22
	LDA @VIRTUAL02
	ASL
	TAX
	LDA #5
	STA ENTITY_SCRIPT_VAR3_TABLE,X
	BRA @UNKNOWN26
@UNKNOWN22:
	LDX @VIRTUAL04
	LDA a:char_struct::afflictions + STATUS_GROUP::PERSISTENT_EASYHEAL,X
	AND #$00FF
	CMP #STATUS_0::UNCONSCIOUS
	BNE @UNKNOWN23
	LDA @VIRTUAL02
	ASL
	TAX
	LDA #16
	STA ENTITY_SCRIPT_VAR3_TABLE,X
	BRA @UNKNOWN26
@UNKNOWN23:
	LDA @VIRTUAL02
	ASL
	TAX
	LDA ENTITY_SURFACE_FLAGS,X
	STA @LOCAL00
	AND #$000C
	CMP #12
	BNE @UNKNOWN24
	LDA #24
	STA ENTITY_SCRIPT_VAR3_TABLE,X
	BRA @UNKNOWN26
@UNKNOWN24:
	LDA @LOCAL00
	AND #$0008
	CMP #8
	BNE @UNKNOWN25
	LDA #16
	STA ENTITY_SCRIPT_VAR3_TABLE,X
	BRA @UNKNOWN26
@UNKNOWN25:
	LDA #8
	STA ENTITY_SCRIPT_VAR3_TABLE,X
@UNKNOWN26:
	LDX @VIRTUAL04
	LDA a:char_struct::afflictions + STATUS_GROUP::PERSISTENT_EASYHEAL,X
	AND #$00FF
	CMP #STATUS_0::PARALYZED
	BNE @UNKNOWN27
	LDA @VIRTUAL02
	ASL
	TAX
	LDA #56
	STA ENTITY_SCRIPT_VAR3_TABLE,X
@UNKNOWN27:
	TYA
	ASL
	STA @VIRTUAL02
	LDA @LOCAL01
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC @VIRTUAL02
	TAX
	LDA f:PLAYABLE_CHAR_GFX_TABLE,X
@UNKNOWN28:
	PLD
	RTL