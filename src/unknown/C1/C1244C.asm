
UNKNOWN_C1244C: ;$C1244C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE 42
	STY $28
	STX $26
	STA $24
	JSR GET_ACTIVE_WINDOW_ADDRESS
	STA $22
	CLC
	ADC #$001B
	TAY
	MOVE_INT_YPTRSRC __BSS_START__, $0A
	MOVE_INT $0A, $1E
	LDA $26
	CMP #$0001
	BNEL @UNKNOWN7
	LDA #.LOWORD(WINDOW_TEXT_ATTRIBUTES_BACKUP)
	JSL UNKNOWN_C20A20
	LDA GAME_STATE+game_state::player_controlled_party_count
	AND #$00FF
	CMP #$0001
	BNE @UNKNOWN1
	LDX #$0033
	BRA @UNKNOWN2
@UNKNOWN1:
	CLC
	ADC #WINDOW::UNKNOWN28
	TAX
	DEX
@UNKNOWN2:
	STX $04
	LDA $04
	STA $1C
	CREATE_WINDOW_NEAR $04
	STZ $1A
	JMP @UNKNOWN4
@UNKNOWN3:
	LDA $1A
	CLC
	ADC #.LOWORD(GAME_STATE) + game_state::party_members
	STA $02
	LDX $02
	LDA __BSS_START__,X
	AND #$00FF
	JSL GET_PARTY_CHARACTER_NAME
<<<<<<< HEAD
	MOVE_INT @VIRTUAL06, @LOCAL00
	LDX #6
	LDA #.LOWORD(TEMPORARY_TEXT_BUFFER)
=======
	MOVE_INT $06, $0E
	LDX #$0006
	LDA #.LOWORD(UNKNOWN_7E9C9F)
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	STZ TEMPORARY_TEXT_BUFFER+5
	REP #PROC_FLAGS::ACCUM8
<<<<<<< HEAD
	PROMOTENEARPTR TEMPORARY_TEXT_BUFFER, @VIRTUAL06
=======
	PROMOTENEARPTR UNKNOWN_7E9C9F, $06
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	REP #PROC_FLAGS::ACCUM8
	MOVE_INT $06, $0E
	LDA $1A
	ASL
	ASL
	CLC
	ADC $24
	TAY
	MOVE_INT_YPTRSRC __BSS_START__, $06
	MOVE_INT $06, $12
	LDY #$0000
	LDA $1A
	STA $04
	ASL
	ADC $04
	ASL
	TAX
	STX $18
	LDX $02
	LDA __BSS_START__,X
	AND #$00FF
	LDX $18
	JSR UNKNOWN_C1153B
	INC $1A
@UNKNOWN4:
	LDA GAME_STATE+game_state::player_controlled_party_count
	AND #$00FF
	CLC
	SBC $1A
	JUMPGTS @UNKNOWN3
	JSR PRINT_MENU_ITEMS
	LDA $28
	JSR SELECTION_MENU
	TAX
	STX $16
	LDA $1C
	STA $04
	JSL CLOSE_WINDOW
	LDA #.LOWORD(WINDOW_TEXT_ATTRIBUTES_BACKUP)
	JSL UNKNOWN_C20ABC
	JMP @UNKNOWN42
@UNKNOWN7:
	LDX #$0000
	BRA @UNKNOWN9
@UNKNOWN8:
	TXA
	ASL
	ASL
	STA $1C
	CLC
	ADC $24
	TAY
	MOVE_INT_YPTRSRC __BSS_START__, $06
	LDA $1C
	CLC
	ADC #.LOWORD(PARTY_MEMBER_SELECTION_SCRIPTS)
	TAY
	MOVE_INT_YPTRDEST $06, __BSS_START__
	INX
@UNKNOWN9:
	CPX #$0004
	BNE @UNKNOWN8
	LDA BATTLE_MENU_CURRENT_CHARACTER_ID
	CMP #$FFFF
	BNE @UNKNOWN10
	LDX #$0000
	BRA @UNKNOWN11
@UNKNOWN10:
	LDX BATTLE_MENU_CURRENT_CHARACTER_ID
@UNKNOWN11:
	STX $04
	LDA GAME_STATE + game_state::party_members,X
	AND #$00FF
	DEC
	ASL
	ASL
	CLC
	ADC #.LOWORD(PARTY_MEMBER_SELECTION_SCRIPTS)
	TAY
	MOVE_INT_YPTRSRC __BSS_START__, $06
	MOVE_INT_CONSTANT NULL, $0A
	CMP32 $06, $0A
	BEQ @UNKNOWN13
	MOVE_INT $06, $0E
	JSL DISPLAY_TEXT
@UNKNOWN13:
<<<<<<< HEAD
	STZ PAGINATION_ANIMATION_FRAME
	LDA #10
	STA @VIRTUAL02
	STA @LOCAL05
=======
	STZ UNKNOWN_7E5E7C
	LDA #$000A
	STA $02
	STA $1C
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
@UNKNOWN14:
	LDA $26
	BNE @UNKNOWN15
	LDA $04
	JSL UNKNOWN_C43573
@UNKNOWN15:
	JSL CLEAR_INSTANT_PRINTING
	JSL WINDOW_TICK
<<<<<<< HEAD
	LDA @VIRTUAL04
	STA @LOCAL08
	LDA PAGINATION_WINDOW
	CMP #.LOWORD(-1)
=======
	LDA $04
	STA $24
	LDA UNKNOWN_7E5E7A
	CMP #$FFFF
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	BEQ @UNKNOWN16
	LDA PAGINATION_WINDOW
	ASL
	TAX
<<<<<<< HEAD
	LDA OPEN_WINDOW_TABLE,X
	CMP #.LOWORD(-1)
=======
	LDA WINDOW_EXISTENCE_TABLE,X
	CMP #$FFFF
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	BEQ @UNKNOWN16
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	CLC
<<<<<<< HEAD
	ADC #.LOWORD(WINDOW_STATS)
	STA @LOCAL04
@UNKNOWN16:
	LDA PAGINATION_WINDOW
	CMP #.LOWORD(-1)
=======
	ADC #.LOWORD(WINDOW_STATS_TABLE)
	STA $1A
@UNKNOWN16:
	LDA UNKNOWN_7E5E7A
	CMP #$FFFF
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	BEQ @UNKNOWN17
	LDA PAGINATION_WINDOW
	ASL
	TAX
<<<<<<< HEAD
	LDA OPEN_WINDOW_TABLE,X
	CMP #.LOWORD(-1)
	BEQ @UNKNOWN17
	LOADPTR UNKNOWN_C3E41C_PTR_TABLE, @VIRTUAL06
	LDA PAGINATION_ANIMATION_FRAME
=======
	LDA WINDOW_EXISTENCE_TABLE,X
	CMP #$FFFF
	BEQ @UNKNOWN17
	LOADPTR UNKNOWN_C3E41C_PTR_TABLE, $06
	LDA UNKNOWN_7E5E7C
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	DEREFERENCE_PTR_TO $06, $06
	MOVE_INT $06, $0E
	LDY #window_stats::window_y
	LDA ($1A),Y
	ASL
	ASL
	ASL
	ASL
	ASL
	STA $02
	LDY #window_stats::window_x
	LDA ($1A),Y
	LDY #window_stats::width
	CLC
	ADC ($1A),Y
	DEC
	DEC
	DEC
	CLC
	ADC $02
	CLC
	ADC #$7C00
	TAY
	LDX #$0008
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL PREPARE_VRAM_COPY
	.A16
@UNKNOWN17:
	LDA #$0000
	STA $16
	JMP @UNKNOWN29
@UNKNOWN18:
	JSL UNKNOWN_C12E42
	LDA PAD_PRESS
	AND #PAD::LEFT
	BEQ @UNKNOWN21
	LDX $24
	DEX
	STX $16
	LDA $26
	BEQ @UNKNOWN19
	LDY #$0002
	BRA @UNKNOWN20
@UNKNOWN19:
	LDY #$001B
@UNKNOWN20:
<<<<<<< HEAD
	LDA #2
	STA PAGINATION_ANIMATION_FRAME
=======
	LDA #$0002
	STA UNKNOWN_7E5E7C
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	JMP @UNKNOWN33
@UNKNOWN21:
	LDA PAD_PRESS
	AND #PAD::RIGHT
	BEQ @UNKNOWN24
	LDX $24
	INX
	STX $16
	LDA $26
	BEQ @UNKNOWN22
	LDY #SFX::CURSOR2
	BRA @UNKNOWN23
@UNKNOWN22:
	LDY #SFX::MENU_OPEN_CLOSE
@UNKNOWN23:
<<<<<<< HEAD
	LDA #3
	STA PAGINATION_ANIMATION_FRAME
=======
	LDA #$0003
	STA UNKNOWN_7E5E7C
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	BRA @UNKNOWN33
@UNKNOWN24:
	LDA PAD_PRESS
	AND #PAD::A_BUTTON | PAD::L_BUTTON
	BEQ @UNKNOWN25
	LDX $04
	LDA GAME_STATE + game_state::party_members,X
	AND #$00FF
	TAX
	STX $16
	LDA #SFX::CURSOR1
	JSL PLAY_SOUND
	JMP @UNKNOWN42
@UNKNOWN25:
	LDA PAD_PRESS
	AND #PAD::B_BUTTON | PAD::SELECT_BUTTON
	BEQ @UNKNOWN28
	LDA $28
	CMP #$0001
	BNE @UNKNOWN28
	LDX #$0000
	STX $16
	LDA $26
	BEQ @UNKNOWN26
	LDY #SFX::CURSOR2
	BRA @UNKNOWN27
@UNKNOWN26:
	LDY #SFX::MENU_OPEN_CLOSE
@UNKNOWN27:
	TYA
	JSL PLAY_SOUND
	JSL UNKNOWN_C3E6F8
	JMP @UNKNOWN42
@UNKNOWN28:
	LDA $16
	INC
	STA $16
@UNKNOWN29:
	LDX $1C
	STX $02
	CMP $02
	BCCL @UNKNOWN18
	LDA PAGINATION_ANIMATION_FRAME
	BNE @UNKNOWN31
	LDX #$0001
	BRA @UNKNOWN32
@UNKNOWN31:
	LDX #$0000
@UNKNOWN32:
<<<<<<< HEAD
	STX PAGINATION_ANIMATION_FRAME
	LDA #10
	STA @VIRTUAL02
	STA @LOCAL05
=======
	STX UNKNOWN_7E5E7C
	LDA #$000A
	STA $02
	STA $1C
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	JMP @UNKNOWN16
@UNKNOWN33:
	LDA GAME_STATE+game_state::player_controlled_party_count
	AND #$00FF
	STA $24
	STX $02
	CLC
	SBC $02
	BRANCHGTS @UNKNOWN36
	LDX #$0000
	STX $16
	BRA @UNKNOWN39
@UNKNOWN36:
	STX $02
	LDA #$0000
	CLC
	SBC $02
	BRANCHLTEQS @UNKNOWN39
	LDA $24
	TAX
	DEX
	STX $16
@UNKNOWN39:
	TXA
	CMP $04
	BEQ @UNKNOWN41
	TYA
	JSL PLAY_SOUND
	LDX $16
	STX $04
	LDA GAME_STATE + game_state::party_members,X
	AND #$00FF
	DEC
	ASL
	ASL
	CLC
	ADC #.LOWORD(PARTY_MEMBER_SELECTION_SCRIPTS)
	TAY
	MOVE_INT_YPTRSRC __BSS_START__, $06
	MOVE_INT_CONSTANT NULL, $0A
	CMP32 $06, $0A
	BEQ @UNKNOWN41
	MOVE_INT $06, $0E
	JSL DISPLAY_TEXT
@UNKNOWN41:
	LDA #$0004
	STA $02
	STA $1C
	JMP @UNKNOWN14
@UNKNOWN42:
<<<<<<< HEAD
	LDA #.LOWORD(-1)
	STA PAGINATION_ANIMATION_FRAME
	MOVE_INT @LOCAL06, @VIRTUAL0A
	LDA @LOCAL07
=======
	LDA #$FFFF
	STA UNKNOWN_7E5E7C
	MOVE_INT $1E, $0A
	LDA $22
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	CLC
	ADC #$001B
	TAY
	MOVE_INT_YPTRDEST $0A, __BSS_START__
	LDX $16
	TXA
	PLD
	RTS
