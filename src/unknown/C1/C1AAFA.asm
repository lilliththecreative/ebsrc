
UNKNOWN_C1AAFA:
	BEGIN_C_FUNCTION
	STACK_RESERVE_VARS
	STACK_RESERVE_INT32
	STACK_RESERVE_INT32
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_RETURN_INT16
	END_STACK_VARS
	LDA #0
	STA @VIRTUAL02
	LDA #2
	JSR UNKNOWN_C193E7
	LDA #.LOWORD(WINDOW_TEXT_ATTRIBUTES_BACKUP)
	JSL UNKNOWN_C20A20
	CREATE_WINDOW_NEAR #WINDOW::PHONE_MENU
	LOADPTR STATUS_EQUIP_WINDOW_TEXT_14, @LOCAL00
	LDX #3
	LDA #5
	JSL SET_WINDOW_TITLE
	LDY #1
	STY @LOCAL03
	BRA @UNKNOWN2
@UNKNOWN0:
	LDA @VIRTUAL00
	AND #$00FF
	BEQ @UNKNOWN1
	LDA @LOCAL02
	CLC
	ADC #psi_teleport_destination::event_flag
	CLC
	ADC @VIRTUAL06
	STA @VIRTUAL06
	LDA [@VIRTUAL06]
	JSL GET_EVENT_FLAG
	CMP #0
	BEQ @UNKNOWN1
.IF .DEFINED(JPN)
	MOVE_INT @VIRTUAL0A, @LOCAL00
.ELSE
	MOVE_INT @VIRTUAL0A, @VIRTUAL06
	MOVE_INT @VIRTUAL06, @LOCAL00
.ENDIF
	LDX #.SIZEOF(psi_teleport_destination::name)
	LDA #.LOWORD(TEMPORARY_TEXT_BUFFER)
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	STZ TEMPORARY_TEXT_BUFFER+.SIZEOF(psi_teleport_destination::name)
	REP #PROC_FLAGS::ACCUM8
	PROMOTENEARPTR TEMPORARY_TEXT_BUFFER, @VIRTUAL06
	REP #PROC_FLAGS::ACCUM8
	MOVE_INT @VIRTUAL06, @LOCAL00
	MOVE_INT_CONSTANT NULL, @LOCAL01
	LDY @LOCAL03
	TYA
	JSR UNKNOWN_C115F4
@UNKNOWN1:
	LDY @LOCAL03
	INY
	STY @LOCAL03
@UNKNOWN2:
	LOADPTR PSI_TELEPORT_DEST_TABLE, @VIRTUAL06
	TYA
	OPTIMIZED_MULT @VIRTUAL04, .SIZEOF(psi_teleport_destination)
	STA @LOCAL02
	MOVE_INTX @VIRTUAL06, @VIRTUAL0A
	CLC
	ADC @VIRTUAL0A
	STA @VIRTUAL0A
	SEP #PROC_FLAGS::ACCUM8
	LDA [@VIRTUAL0A]
	STA @VIRTUAL00
	REP #PROC_FLAGS::ACCUM8
	LDA @VIRTUAL00
	AND #$00FF
	BNEL @UNKNOWN0
	LDA #0
	JSR UNKNOWN_C12BD5
	CMP #0
	BEQ @UNKNOWN4
	LDY #1
	LDX #0
	TYA
	JSR UNKNOWN_C1180D
	LDA #1
	JSR SELECTION_MENU
	STA @VIRTUAL02
@UNKNOWN4:
	JSR CLOSE_FOCUS_WINDOW
	JSR UNKNOWN_C19437
	LDA #.LOWORD(WINDOW_TEXT_ATTRIBUTES_BACKUP)
	JSL UNKNOWN_C20ABC
	LDA @VIRTUAL02
	END_C_FUNCTION
