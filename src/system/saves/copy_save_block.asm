
COPY_SAVE_BLOCK:
	BEGIN_C_FUNCTION
	STACK_RESERVE_VARS
	STACK_RESERVE_INT32
	STACK_RESERVE_INT32
.IF .DEFINED(USA)
	STACK_RESERVE_INT32 "LOCALEB"
.ENDIF
	STACK_RESERVE_INT32 "LOCAL03"
	STACK_RESERVE_INT16 "LOCAL04"
	STACK_RESERVE_PARAM_INT16 ;int block
	END_STACK_VARS
	STA @LOCAL04
	LOADPTR SAVE_BASE, @VIRTUAL06
	LDY #.SIZEOF(save_block)
	LDA @LOCAL04
	JSL MULT16
	STORE_INT1632 @VIRTUAL0A
	CLC
	ADD_INT_ASSIGN @VIRTUAL0A, @VIRTUAL06
	MOVE_INT @VIRTUAL0A, @LOCAL03
	MOVE_INT @VIRTUAL06, @VIRTUAL0A
	LDY #.SIZEOF(save_block)
	TXA
	JSL MULT16
	STORE_INT1632 @VIRTUAL06
	CLC
	ADD_INT_ASSIGN @VIRTUAL06, @VIRTUAL0A
	.IF .DEFINED(JPN)
		MOVE_INT @LOCAL03, @VIRTUAL0A
		MOVE_INT @VIRTUAL0A, @LOCAL00
	.ELSE ;register allocation is hard.......
		MOVE_INT @VIRTUAL06, @LOCALEB
		MOVE_INT @LOCAL03, @VIRTUAL0A
		MOVE_INT @VIRTUAL0A, @VIRTUAL06
		MOVE_INT @VIRTUAL06, @LOCAL00
		MOVE_INT @LOCALEB, @VIRTUAL06
	.ENDIF
	MOVE_INT @VIRTUAL06, @LOCAL01
	LDA #.SIZEOF(save_block)
	JSL MEMCPY24
	END_C_FUNCTION
