
PREPARE_YOUR_SANCTUARY_LOCATION_TILE_ARRANGEMENT_DATA:
	BEGIN_C_FUNCTION
	STACK_RESERVE_VARS
	STACK_RESERVE_INT8
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_PARAM_INT16
	STACK_RESERVE_PARAM_INT16
	END_STACK_VARS
	STY @LOCAL05
	SEC
	SBC #16
	STA @LOCAL04
	TXA
	SEC
	SBC #14
	STA @LOCAL03
	SEP #PROC_FLAGS::ACCUM8
	STZ_BADOPT @LOCAL00
	LDX #$0800
	REP #PROC_FLAGS::ACCUM8
	LDA #.LOWORD(LOADED_MAP_BLOCKS)
	JSL MEMSET16
	LOADPTR BUFFER, @VIRTUAL06
	LDY @LOCAL05
	TYA
	LDY #$0800
	JSL MULT16
	CLC
	ADC @VIRTUAL06
	STA @VIRTUAL06
	LDA #0
	STA @VIRTUAL04
	JMP @UNKNOWN6
@UNKNOWN0:
	LDA #0
	STA @VIRTUAL02
	STA @LOCAL02
	JMP @UNKNOWN4
@UNKNOWN1:
	LDA @VIRTUAL04
	CLC
	ADC @LOCAL03
	LSR
	LSR
	STA @LOCAL01
	LDA @VIRTUAL02
	CLC
	ADC @LOCAL04
	LSR
	LSR
	TAY
	LSR
	LSR
	LSR
	STA @VIRTUAL02
	LDA @LOCAL01
	AND #$FFFC
	OPTIMIZED_MULT @VIRTUAL04, 8
	CLC
	ADC @VIRTUAL02
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:GLOBAL_MAP_TILESETPALETTE_DATA,X
	LSR
	LSR
	LSR
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP LOADED_MAP_TILE_COMBO
	BNE @UNKNOWN2
	LDA @LOCAL01
	TAX
	TYA
	JSL REDIRECT_C0A156
	STA @LOCAL01
	BRA @UNKNOWN3
@UNKNOWN2:
	LDA #0
	STA @LOCAL01
@UNKNOWN3:
	LDA @LOCAL02
	STA @VIRTUAL02
	CLC
	ADC @LOCAL04
	AND #$0003
	PHA
	LDA @VIRTUAL04
	CLC
	ADC @LOCAL03
	AND #$0003
	OPTIMIZED_MULT @VIRTUAL04, 4
	STA @VIRTUAL02
	LDA @LOCAL01
	OPTIMIZED_MULT @VIRTUAL04, 16
	CLC
	ADC @VIRTUAL02
	PLY
	STY @VIRTUAL02
	CLC
	ADC @VIRTUAL02
	STA @LOCAL01
	LOADPTR BUFFER + $8000, @VIRTUAL0A
	LDA @LOCAL01
	ASL
	CLC
	ADC @VIRTUAL0A
	STA @VIRTUAL0A
	LDA [@VIRTUAL0A]
	AND #$03FF
	ASL
	TAX
	LDA #$FFFF
	STA LOADED_MAP_BLOCKS,X
	LDA [@VIRTUAL0A]
	STA [@VIRTUAL06]
	INC @VIRTUAL06
	INC @VIRTUAL06
	LDA @LOCAL02
	STA @VIRTUAL02
	INC @VIRTUAL02
	LDA @VIRTUAL02
	STA @LOCAL02
@UNKNOWN4:
	LDA @VIRTUAL02
	CMP #32
	BCCL @UNKNOWN1
	INC @VIRTUAL04
@UNKNOWN6:
	LDA @VIRTUAL04
	CMP #30
	BCCL @UNKNOWN0
	END_C_FUNCTION
