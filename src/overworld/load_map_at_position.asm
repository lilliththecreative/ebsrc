
;void LoadMapAtPos(int x, int y)
LOAD_MAP_AT_POSITION: ;$C013F6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE 24
	STX $16
	STA $14
	JSL UNKNOWN_C02194
<<<<<<< HEAD
	LDA @LOCAL03
	STA SCREEN_X_PIXELS
	STA SCREEN_X_PIXELS_COPY
	LDX @LOCAL04
	STX SCREEN_Y_PIXELS
	STX SCREEN_Y_PIXELS_COPY
=======
	LDA $14
	STA UNKNOWN_7E4380
	STA UNKNOWN_7E437C
	LDX $16
	STX UNKNOWN_7E4382
	STX UNKNOWN_7E437E
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
	LSR
	LSR
	LSR
	STA $02
	TXA
	LSR
	LSR
	LSR
	TAY
	STY $12
	TYA
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA $02
	LSR
	LSR
	LSR
	LSR
	LSR
	JSR LOAD_MAP_AT_SECTOR
	LDA PHOTOGRAPH_MAP_LOADING_MODE
	BNE @UNKNOWN0
	JSL OVERWORLD_SETUP_VRAM
@UNKNOWN0:
	LDA $02
	SEC
	SBC #$0010
	STA $10
	LDY $12
	TYA
	SEC
	SBC #$000E
	STA $14
	LDA $02
	SEC
	SBC #$0020
	STA $04
	TYA
	SEC
	SBC #$0020
	STA $02
	STA $0E
	LDX #$0000
	BRA @UNKNOWN2
@UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00FF
	STA LOADED_COLUMNS_Y,X
	STA LOADED_COLUMNS_X,X
	STA LOADED_ROWS_Y,X
	STA LOADED_ROWS_X,X
	INX
@UNKNOWN2:
	CPX #$0010
	BCC @UNKNOWN1
	LDY #$0000
	STY $12
	BRA @UNKNOWN4
@UNKNOWN3:
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA $02
	STY $02
	CLC
	ADC $02
	TAX
	LDA $04
	JSR UNKNOWN_C00AC5
	LDY $12
	INY
	STY $12
@UNKNOWN4:
	CPY #$003C
	BCC @UNKNOWN3
	LDY #$0000
	STY $12
	BRA @UNKNOWN6
@UNKNOWN5:
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA $02
	STY $02
	CLC
	ADC $02
	TAX
	LDA $04
	JSR LOAD_COLLISION_ROW
	LDY $12
	INY
	STY $12
@UNKNOWN6:
	CPY #$003C
	BCC @UNKNOWN5
@UNKNOWN7:
	REP #PROC_FLAGS::ACCUM8
	LDA FADE_PARAMETERS + fade_parameters::step
	AND #$00FF
	BNE @UNKNOWN7
	LDA PHOTOGRAPH_MAP_LOADING_MODE
	BNE @UNKNOWN8
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0017
	STA TM_MIRROR
@UNKNOWN8:
	REP #PROC_FLAGS::ACCUM8
	LDA NPC_SPAWNS_ENABLED
	BEQ @UNKNOWN9
<<<<<<< HEAD
	LDA #1
	STA NPC_SPAWNS_ENABLED
=======
	LDA #$0001
	STA UNKNOWN_7E4A58
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
@UNKNOWN9:
	LDA SCREEN_X_PIXELS
	SEC
	SBC #$0080
	STA BG2_X_POS
	STA BG1_X_POS
	LDA SCREEN_Y_PIXELS
	SEC
	SBC #$0070
	STA BG2_Y_POS
	STA BG1_Y_POS
	LDY #$FFFF
	STY $12
	BRA @UNKNOWN11
@UNKNOWN10:
	TYA
	CLC
	ADC $14
	STA $02
	LDX $02
	LDA $10
	JSR UNKNOWN_C00E16
	LDX $02
	LDA $10
	JSL UNKNOWN_C0255C
	LDY $12
	INY
	STY $12
@UNKNOWN11:
	CPY #$001F
	BNE @UNKNOWN10
	LDY #$FFF8
	STY $12
	BRA @UNKNOWN13
@UNKNOWN12:
	TYA
	CLC
	ADC $14
	TAX
	LDA $10
	SEC
	SBC #$0008
	JSL SPAWN_HORIZONTAL
	LDY $12
	INY
	STY $12
@UNKNOWN13:
	CPY #$0028
	BNE @UNKNOWN12
	LDA NPC_SPAWNS_ENABLED
	BEQ @UNKNOWN14
<<<<<<< HEAD
	LDA #.LOWORD(-1)
	STA NPC_SPAWNS_ENABLED
@UNKNOWN14:
	LDA @LOCAL01
	STA SCREEN_LEFT_X
	LDA @LOCAL03
	STA SCREEN_TOP_Y
	END_C_FUNCTION
=======
	LDA #$FFFF
	STA UNKNOWN_7E4A58
@UNKNOWN14:
	LDA $10
	STA UNKNOWN_7E4374
	LDA $14
	STA UNKNOWN_7E4376
	PLD
	RTL
>>>>>>> parent of e89e3811 (switch to new stack macro, delete old one and replace some magic numbers)
